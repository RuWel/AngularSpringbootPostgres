trigger:
- main

pool:
  vmImage: ubuntu-latest


variables:
  ARTIFACT_NAME: 'SpringBootApp'
  AWS_S3_BUCKET: 'aws-ruwe-bucket'
  AWS_S3_FOLDER: deliveries

steps: 
- template: templates/maven_clean_package.yml
- template: templates/copy_jar_files.yml
  parameters:
    src: '$(Build.SourcesDirectory)/target'
    files: '**/*.jar'
    dst: '$(Build.ArtifactStagingDirectory)'
- template: templates/publish_artifact.yml
  parameters:
    path: '$(Build.ArtifactStagingDirectory)'
    name: $(ARTIFACT_NAME)
- template: templates/copy_to_app_jar.yml
    src: '$(Build.ArtifactStagingDirectory)'   
